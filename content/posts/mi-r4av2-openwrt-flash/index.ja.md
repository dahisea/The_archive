---
title: "2023 Xiaomi Router 4A Gigabit Edition 中国本土最新モデル (r4av2) Openwrt フラッシュ チュートリアル"
date: 2023-05-19T01:25:04Z
draft: false
description: "チュートリアル"
tags: ["ルーティング","openwrt"]
---
## 序文

ハイジャックされ、パフォーマンスが著しく低下した古いルーターを置き換えるために、この Xiaomi Router 4A ギガビット エディションを購入しました。しかし、結局のところ、Xiaomi ルーターは Xiaomi ルーターです (ナンセンス)、このルーターは、自作の DNS AdguardHome バックエンドを通じて、api.miwifi.com (Xiaomi Cloud) と www.baidu.com および www に大量のリクエストを送信します。淘宝網（意味不明）、ひょうたんの中に何の薬が売っているのか分かりません。もともとこのルータは扱いやすいと思っていたのですが、いろいろ調べてみると、業者から送られてきたのは実は新しいハードウェアのr4av2だったことが分かりました（海外版はハードウェアac1200-rb02に相当します）。

ここでの一般的な科学：Xiaomiルーター4aギガビットバージョンは、①r4aとr3gv2、②r4av2に分けられます（混同しないでください、ハードウェアが異なり、ファームウェアは一般にユニバーサルではありません）

当時、私はこの分野ではまったくの初心者で、ルーターのハードウェアのバージョンも新しかったため、研究が中断されてから数日は有益な情報を見つけることができませんでした。公式ファームウェアの2.4Ghzネットワーク切断バグを毎日経験しています。最近、試験が終わったので、ホームネットワークをいじるのに時間がかかるようになりました（普段はかなりの時間を費やしています）。既存の限られた状況を利用して、より良いネットワーク状況を作成したいと考えています。

インターネット上にはすでに r4av2 のクラッキング チュートリアルがあることがわかりましたが、これらのチュートリアルは少し散らかっていたり、単純すぎたりします (恩山にはひと目で理解できる偉い人がいます。png)。そのため、このチュートリアルを手助けするために書きました。 r4av2 ユーザーの皆様、ご意見を明確にしてください。このチュートリアルは、Xiaomi Router 4A Gigabit Edition (r4av2: 2.30.x バージョン ハードウェア、16M フラッシュ メモリ) のアクセス許可を解読し、OPENWRT を使用するためのフラッシュ ブリードを支援します。


＃＃ 材料

チュートリアルを開始する前に、次の準備資料を準備する必要があります

1.ルーター本体
Xiaomi Router 4A Gigabit Edition (最新の r4av2 ハードウェア、ファームウェア バージョン 2.30.x をサポート)。

2. ネットワークケーブル
ルーターに正常に接続できるネットワークケーブル。

3. コンピューター
通常、ネットワーク ケーブルを介してルーターに接続できるコンピューター。 (コンピュータには Windows システムが搭載されており、システムで Telnet が有効になっている必要があります。<フラッシュ ブリードのコマンドを実行するためにコンピュータを使用しない場合は、システムの Telnet 環境のステータスを無視してください>。バグが発生する可能性があることに注意してください。クラックプログラムを実行すると Windows で問題が発生するため、クラックする際に問題がある場合は、さらに数回試してください)。

4. ソフトウェア
このチュートリアルで説明されているソフトウェア ツールとファームウェア パッケージ。 (コメント欄で拾ってください)

5.目
Web ブラウザの使用に慣れており、ルーターのリセット ボタンがどこにあるかを確認してください。 (品種を使用する場合は必須)


## 準備ができたら、開始できます

1.ロックを解除する
まず、コンピュータが通常ネットワーク ケーブルを通じてルータに接続されているときにロック解除スクリプト「V2 バージョン」を実行し、対応するルータの LAN IP、マシンのローカル エリア ネットワーク IP、およびルータ管理パスワードを入力する必要があります。その後、プログラムは自動的にルーターの権限のロックを解除しようとします。 Windows コンピュータの使用がまだ成功しない場合は、さらに数回試してみることをお勧めします。 Android スマートフォンを使用してこのロック解除スクリプトを実行すると、基本的には成功しません。

2.品種ファイルをそこに入れます
許可のロックが正常に解除された場合は、WINSCP (このルーターは Breeze-mt7621-pbr-m1.bin を使用します) を介してルーターの /tmp/ ディレクトリに品種ファームウェア (breed.bin) をアップロードする必要があります。 Ensan 氏の投稿とビデオをご覧ください (記事の最後に参照)。

3.品種ファイルをフラッシュします
アップロード後、フラッシュインを試すことができます。まずルーターの端末に接続します。
次に、バックアップを試みることができます (方法はインターネットからのものです)、投稿者はバックアップを忘れました
コマンドは次のとおりです。

「」
    cd /tmp
    mkdir バックアップB9AD
    CDバックアップB9AD
    dd if=/dev/mtd0 of=/tmp/backupB9AD/mtd0-ALL.bin
    dd if=/dev/mtd1 of=/tmp/backupB9AD/mtd1-Bootloader.bin
    dd if=/dev/mtd2 of=/tmp/backupB9AD/mtd2-Config.bin
    dd if=/dev/mtd3 of=/tmp/backupB9AD/mtd3-Bdata.bin
    dd if=/dev/mtd4 of=/tmp/backupB9AD/mtd4-Factory.bin
    dd if=/dev/mtd5 of=/tmp/backupB9AD/mtd5-crash.bin
    dd if=/dev/mtd6 of=/tmp/backupB9AD/mtd6-cfg_bak.bin
    dd if=/dev/mtd7 of=/tmp/backupB9AD/mtd7-overlay.bin
    dd if=/dev/mtd8 of=/tmp/backupB9AD/mtd8-OS1.bin
    dd if=/dev/mtd9 of=/tmp/backupB9AD/mtd9-rootfs.bin
    dd if=/dev/mtd10 of=/tmp/backupB9AD/mtd10-disk.bin
「」

バックアップ後、これらのファイルをコピーし (WINSCP を使用できます)、将来公式 Web サイトを復元する必要がある場合に備えて保存します。
次に、breed flash コマンドを実行する必要があります。

「」
mtd -r write /tmp/breed.bin ブートローダー
「」

4.品種に入る
ブラッシングが終わったら、ブリードシステムに入ることができます。ブリードシステムに入りたい場合は、ルーターのリセットボタンを押し、ルーターの電源コードを再度差し込み、3秒後に放してください。この時点で、ブリードシステム（バックグラウンド）に入ります。アドレスは 192.168.1.1 です）。

5. 品種とは何ですか?
ここで注意してください: Breeze は回復コンソールであり、openwrt ファームウェアをフラッシュするために使用されます。

6. 入場後
品種背景を入力したら、すぐに full.bin と eeprom.bin をバックアップしてください。 full.bin はブリックを保存するのに役立つかもしれません。また、eeprom.bin は非常に重要です。ファームウェアをフラッシュするたびに、ファームウェア パッケージも eeprom.bin と一緒にフラッシュする必要があります。eeprom.bin がないと、何らかの奇妙なバグ (信号がないなど) が発生します。

7. フラッシュ Openwrt ファームウェア
バックアップが完了したら、OPENWRT ファームウェア (下) と eeprom.bin を一緒にフラッシュし、進行状況バーがなくなるまで辛抱強く待ちます。その後、OPENWRT が自動的に再起動されます。楽しんでください。

8. パスワードは何ですか?
[追加] パスワードを入力する必要がある場合は、次の (ユーザー/パスワード) の組み合わせを試してください: [root/root][root/(empty)][root/password][(default)/88888888]


## 参考記事

"[一部のファームウェア] supes.top" [https://op.supes.top/firmware/ramips_mt7621/xiaomi_mi-router-4a-gigabit-v2/](https://op.supes.top/firmware/ramips_mt7621/ xiaomi_mi-router-4a-gigabit-v2/) (111 で始まるカスタマイズされたファームウェア ソース)

1. [https://www.right.com.cn/forum /thread-8261014-1-1.html](https://www.right.com.cn/forum/thread-8261014-1-1. html）

2. [https://www.right.com.cn/forum/thread-8269849-1-1.html](https://www.right.com.cn/forum/thread-8269849-1-1. html）

3. [https://www.right.com.cn/forum/thread-8275612-1-1.html](https://www.right.com.cn/forum/thread-8275612-1-1. html) (コメント領域の右から始まるファームウェア ソース)


#閲覧していただきありがとうございます。以下は提案です

Breeze をフラッシュする前に、コマンドを使用してすべてのパーティションをバックアップし、公式ファームウェアへの復元を容易にすることができます。元の投稿者はその方法を知らないため、バックアップはありません。公式の uboot がバックアップされていない場合、ルーターは公式の状態に戻すことができません。

サードパーティのファームウェア Wi-Fi は公式のものほど優れていません。

ルーターが故障してもブロガーは責任を負いません。

> https://share.dahi.icu/r4av2_mi/